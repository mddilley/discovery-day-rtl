import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { github, vsDark } from "@code-surfer/themes";
import { Image } from "mdx-deck";
import kentcdoddstweet from "./images/kentcdoddstweet.png";


export const theme = vsDark;

# React Testing Library 🐙

## 🚀 Discovery Day 8/5/2022 👩‍🚀

---

<Image src={kentcdoddstweet} style={{
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    color: 'white',
    backgroundColor: 'black',
    width: '1172px',
    height: '344px'
  }} />

---

What does React Testing Library allow us to do?



---

What type of testing can we conduct?

- Unit testing - test one component 🧱
- Integration test - test how components work together 🤝

---

<CodeSurfer>

```js title="Create a custom render method" subtitle="and this a subtitle"
import React from "react";
import { render } from "@testing-library/react";
import { BrowserRouter } from "react-router-dom";
import { ThemeProvider } from "@material-ui/core";
import theme from "src/theme";
import GlobalStyles from "src/components/GlobalStyles";
import { UserContext } from "../auth/user";
import { ApolloProvider, ApolloClient, InMemoryCache } from "@apollo/client";

/*
 * Wrapper that contains all of the providers a React component expects to find in this app
 */
const AllTheProviders = ({ children }) => {
  const client = new ApolloClient({
    cache: new InMemoryCache(),
  });

  const mockUserContextValues = {
    user: {
      idToken: {
        payload: {
          "https://hasura.io/jwt/claims":
            '{"x-hasura-default-role": "moped-viewer", "x-hasura-allowed-roles": ["moped-admin"]}',
        },
      },
    },
    login: () => {
      return true;
    },
    logout: () => {
      return true;
    },
    loginLoading: false,
  };

  return (
    <ApolloProvider client={client}>
      <ThemeProvider theme={theme}>
        <UserContext.Provider value={mockUserContextValues}>
          <GlobalStyles />
          <BrowserRouter>{children}</BrowserRouter>
        </UserContext.Provider>
      </ThemeProvider>
    </ApolloProvider>
  );
};

// create custom render method
const customRender = (ui, options) =>
  render(ui, { wrapper: AllTheProviders, ...options });

// re-export everything
export * from "@testing-library/react";

// override render method
export { customRender as render };

```

```diff 37,44

```

```diff 14:16

```

```diff 38,43

```

```diff 39,42

```

```diff 18:34

```

</CodeSurfer>

---

<CodeSurferColumns themes={[vsDark, github]}>

<Step>

```js
const magna = aliqua => aliqua.ut((enim, ad) => enim, 0);
```

```js
const minim = (ad, enim) => dolore.magna(ad / enim);
```

</Step>

<Step>

```js
const lorem = (ipsum, dolor, sit) => {
  const amet = dolor - ipsum;
  return consectetur.adipiscing(
    {
      elit: sed.eiusmod(sit - dolor) / amet + 2,
    },
    (tempor, incididunt) => ipsum + amet * incididunt
  );
};

const magna = aliqua => aliqua.ut((enim, ad) => enim, 0);
```

```js
const minim = (ad, enim) => dolore.magna(ad / enim);

const sed = (eiusmod, tempor, incididunt) => {
  const ut = tempor - eiusmod;
  return labore.et(
    {
      amet: dolore.magna(incididunt - tempor) / ut + 2,
    },
    (aliqua, elit) => eiusmod + ut * elit
  );
};
```

</Step>

</CodeSurferColumns>

---

# The fun parts

- User focused 💙
- Peel back the layers of the app 🧅


---

# Hurdles

- Customizing the `render` method to fit each app :
- Learning `jest-dom` for matchers 🧩
- Getting a hang of the getting the right DOM node 🏄‍♂️